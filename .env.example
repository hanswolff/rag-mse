# Database Configuration
DATABASE_URL="file:./data/dev.db"

# ============================================
# PRODUCTION: REQUIRED FIELDS
# ============================================
# These MUST be set in production. Application will fail to start without them.

# Trusted Proxy IPs - REQUIRED for rate limiting
# Comma-separated list of trusted proxy IPs or CIDR ranges.
# Only X-Forwarded-For / X-Real-IP headers from trusted proxy source ranges are used.
# Defaults to private reverse-proxy ranges if not set:
# "127.0.0.0/8,10.0.0.0/8,192.168.0.0/16"
# Examples:
# - Single IP: "10.0.0.1"
# - Multiple IPs: "10.0.0.1,10.0.0.2"
# - CIDR ranges: "172.16.0.0/12,10.0.0.0/8"
# For Docker setups: "127.0.0.1,172.16.0.0/12"
TRUSTED_PROXY_IPS="127.0.0.0/8,10.0.0.0/8,192.168.0.0/16"

# Authentication - REQUIRED (minimum 32 characters)
NEXTAUTH_SECRET="CHANGE_ME_USE_STRONG_RANDOM_VALUE_AT_LEAST_32_CHARS"

# Application URLs - REQUIRED (must use HTTPS in production)
NEXTAUTH_URL="https://your-domain.de"
APP_URL="https://your-domain.de"

# Cookie Security - REQUIRED
# MUST be "true" in production when using HTTPS
COOKIE_SECURE="true"

# SMTP Configuration for Contact Form - REQUIRED
SMTP_HOST="smtp.your-provider.com"
SMTP_PORT="587"
SMTP_USER="your-smtp-username"
SMTP_PASSWORD="CHANGE_ME_YOUR_SMTP_PASSWORD"
SMTP_FROM="noreply@your-domain.de"

# Admin Email Recipients - REQUIRED (comma-separated)
ADMIN_EMAILS="admin@your-domain.de,another-admin@your-domain.de"

# Redis Configuration - REQUIRED for distributed rate limiting
# Redis connection URL for cluster-wide rate limiting.
# Examples:
# - Docker Compose: "redis://redis:6379" (uses docker service name)
# - Local development: "redis://localhost:6379"
# - With password: "redis://:password@localhost:6379"
# - With database: "redis://localhost:6379/1"
# NOTE: The docker-compose.yml has a default of "redis://redis:6379"
#       Only set this in .env if you need to override it
REDIS_URL="redis://redis:6379"

# ============================================
# OPTIONAL FIELDS (with safe defaults)
# ============================================

# Application Name (safe default provided)
APP_NAME="RAG Schie√üsport MSE"

# Container runtime/build user/group for writable bind mounts (SQLite data directory)
# In production, set explicitly to match the host owner of ./data
APP_UID="1000"
APP_GID="1000"

# Cookie Maximum Age - default: 7 days in seconds
COOKIE_MAX_AGE="604800"

# Maximum Request Body Size - default: 1MB (1048576 bytes)
# Controls the maximum size of JSON request bodies in API endpoints
MAX_REQUEST_BODY_SIZE="1048576"

# ============================================
# DATABASE OPERATIONS (Production Safety)
# ============================================
# These flags control whether database operations are allowed in production.
# By default, database operations are disabled in production for safety.
# Only set these to "true" if you need to initialize or modify the production database.

# Allow schema changes with 'prisma db push' (default: false)
# WARNING: Only enable temporarily when you need to apply schema changes
ALLOW_DB_PUSH="false"

# Allow database seeding with 'pnpm run db:seed' (default: false)
# WARNING: Only enable for initial setup or when you need to create an initial admin user
ALLOW_DB_SEED="false"

# ============================================
# SEED ADMIN USER - OPTIONAL
# ============================================
# Only set these for first-time setup or if you need to create an initial admin user.
# SECURITY WARNING: NEVER use these values in production! You MUST set your own secure values.
# All three must be set together or all three must be unset.
# After first successful seed, you should unset these or remove them from production.
#
# Default values (if not set):
# - SEED_ADMIN_EMAIL: admin@rag-mse.de
# - SEED_ADMIN_PASSWORD: AdminPass123 (INSECURE! Change immediately!)
# - SEED_ADMIN_NAME: Administrator

SEED_ADMIN_EMAIL="CHANGE_ME_ADMIN_EMAIL"
SEED_ADMIN_PASSWORD="CHANGE_ME_STRONG_PASSWORD_MIN_8_CHARS"
SEED_ADMIN_NAME="Administrator"

# ============================================
# DEVELOPMENT ONLY
# ============================================
# These are only for development. Do not use in production.

# Set to "true" for development deployments to skip production configuration validation
# This allows using localhost URLs and less secure settings in development deployments
DEVELOPMENT_DEPLOYMENT="false"

# Keep NODE_ENV at "production" for deploy.sh / Docker runtime.
# Development behavior is controlled by DEVELOPMENT_DEPLOYMENT.
NODE_ENV="production"

# Email Development Mode - OPTIONAL
# When set to "true", emails are NOT sent via SMTP but are logged instead.
# Useful for development and testing without needing a real SMTP server.
EMAIL_DEV_MODE="false"

# Email Development Log Method - OPTIONAL (only used when EMAIL_DEV_MODE="true")
# Controls how emails are logged in development mode:
# - "logger": Log emails to application console/logs (default)
# - "file": Write emails as .eml files to EMAIL_DEV_LOG_DIR
# - "both": Both logger and file
EMAIL_DEV_LOG_METHOD="logger"

# Email Development Log Directory - OPTIONAL (only used when EMAIL_DEV_LOG_METHOD="file" or "both")
# Directory where .eml files are written in development mode.
# Defaults to "./logs/emails" relative to project root.
EMAIL_DEV_LOG_DIR="./logs/emails"

NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# For development, you can use these less secure settings:
# SECURITY WARNING: These are examples ONLY! You MUST replace all passwords and secrets
# before running the application, even in development!
# NEXTAUTH_SECRET="CHANGE_ME_DEV_SECRET_KEY"
# NEXTAUTH_URL="http://localhost:3000"
# APP_URL="http://localhost:3000"
# COOKIE_SECURE="false"
# SMTP_HOST="smtp.example.com"
# SMTP_USER="dev@example.com"
# SMTP_PASSWORD="CHANGE_ME_SMTP_PASSWORD"
# ADMIN_EMAILS="admin@example.com"
# SEED_ADMIN_EMAIL="CHANGE_ME_ADMIN_EMAIL"
# SEED_ADMIN_PASSWORD="CHANGE_ME_STRONG_PASSWORD"
# SEED_ADMIN_NAME="Administrator"
